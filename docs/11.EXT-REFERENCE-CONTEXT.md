# Data types

## jerryx_context_slot_t

**Summary**

The structure defining a single slot.

**Prototype**

```c
typedef struct
{
  /** the initialization function */
  jerry_user_context_init_t init_cb;
  /** the deinitialization function */
  jerry_user_context_deinit_t deinit_cb;
} jerryx_context_slot_t;
```

**See also**

- [JERRYX_CONTEXT_DEFINE_SLOT](#jerryx_context_define_slot)

# Main functions

## jerryx_context_init

**Summary**

Create a single context. This function can be passed as the second argument to `jerry_init_with_user_context ()`.

**Prototype**

```c
void *jerryx_context_init (void);
```

 - return value - a `void *` to be stored in the user context.

**Example**

```c
#include "jerryscript.h"
#include "jerryscript-ext/context.h"
void
init_with_context(void)
{
  jerry_init_with_user_context (JERRY_INIT_EMPTY, jerryx_context_init, jerryx_context_deinit);
  /* ... */
  jerry_cleanup();
}
```

**See also**

- [jerryx_context_deinit](#jerryx_context_deinit)


## jerryx_context_deinit

**Summary**

Free a context. This function iterates over all slots and calls the indicated deinit callback for each slot. This
function can be passed as the third argument to `jerry_init_with_user_context ()`.

**Prototype**

```c
void jerryx_context_deinit (void *user_context_p);
```

 - `user_context_p` - the user context pointer.

**See also**

- [jerryx_context_init](#jerryx_context_init)
- [JERRYX_CONTEXT_DEFINE_SLOT](#jerryx_context_define_slot)


## jerryx_context_get

**Summary**

Retrieve the data stored in a specific slot.

**Prototype**

```c
void *jerryx_context_get (jerryx_context_slot_t *slot_p);
```

 - `slot_p` - the slot from which to retrieve the pointer.
 - return_value - the user data stored at the given slot.

**See also**

- [JERRYX_CONTEXT_SLOT](#jerryx_context_slot)


# Helper macros

## JERRYX_CONTEXT_DEFINE_SLOT

**Summary**

Declares a new slot and stores it in the binary's data section named "jerryx_ctx_slots".

**Prototype**

```c
#define JERRYX_CONTEXT_DEFINE_SLOT(slot_name, init_cb_ptr, deinit_cb_ptr)
```

 - `slot_name` - the suffix to be given to the global static variable holding the slot information.
 - `init_cb_ptr` - the function pointer for the slot initializer.
 - `deinit_cb_ptr` - the function pointer for the slot deinitializer.


## JERRYX_CONTEXT_SLOT

**Summary**

Refer to a previously declared slot. Calls `jerryx_context_get ()` with a pointer to the structure stored in the global
variable whose prefix is provided in the macro's first argument. This means that `JERRYX_CONTEXT_DEFINE_SLOT ()` must
appear earlier in the file to define the slot first.

**Prototype**

```c
#define JERRYX_CONTEXT_SLOT(slot_name)
```
 - `slot_name` - suffix of the global static variable. This is the same prefix that was given to
   `JERRYX_CONTEXT_DEFINE_SLOT`.

**See also**

- [jerryx_context_get](#jerryx_context_get)
- [JERRYX_CONTEXT_DEFINE_SLOT](#jerryx_context_define_slot)
